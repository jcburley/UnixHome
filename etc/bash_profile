#!/bin/bash

export UNIXHOME=$(~/.unixhome "$UNIXHOME" "$PS1")

# Pull in .profile, which e.g. MacPorts creates to prepend to $PATH.
[ -f ~/.profile ] && . ~/.profile

# Get the aliases and functions
if [ -z "$BASHRC_HAS_RUN" ] && [ -f $HOME/.bashrc ]; then
    source $HOME/.bashrc
fi

# Use Emacs if installed. (Git bash which does not support -s.)
if which emacs >/dev/null 2>&1; then
    export EDITOR=emacs
    export GIT_EDITOR=emacs
    export VISUAL=emacs
fi

PATHDIRS="$HOME/bin $HOME/googlesource/depot_tools"

for pd in $PATHDIRS; do
    [ -d $pd ] && PATH=$PATH:$pd
done

export PATH

# Get git goodness in prompts. See bashrc for PS1 and PROMPT_COMMAND
# definitions including $SHLVL. NOTE: __git_ps1 rewrites $PS1!!
export PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ '
export PROMPT_COMMAND='__git_ps1 "\u@\h:\w" "\\\$ "'

export GIT_PS1_SHOWDIRTYSTATE=t
export GIT_PS1_SHOWSTASHSTATE=t
export GIT_PS1_SHOWUPSTREAM="verbose"

export GITBASE=git@github.com:jcburley
