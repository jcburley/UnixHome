;; .emacs

;;; uncomment this line to disable loading of "default.el" at startup
;; (setq inhibit-default-init t)

;; turn on font-lock mode
(when (fboundp 'global-font-lock-mode)
  (global-font-lock-mode t))

;; When invoked from sshd or other non-login process, HOSTNAME env var not necessarily defined.
(unless (getenv "HOSTNAME") (setenv "HOSTNAME" (substring (shell-command-to-string "/bin/hostname") 0 -1)))

;; enable visual feedback on selections
;(setq transient-mark-mode t)

;; default to better frame titles
;;;; Email
;(setq mail-complete-style `angles)
(setq mail-from-style `angles)  ;Use "My Name <[me]>" in "From:"
(setq mail-yank-prefix ">")  ;C-c C-y, C-u C-c C-y, C-c C-r, etc.
(setq mail-self-blind t)  ;automatic "bcc: [me]"
(setq mail-signature t)  ;use C-c C-w to insert ~/.signature manually.

;(setq user-mail-address "craig@jcb-sc.com")
;(setq mail-sources
;      `((maildir :path "/home/craig/Maildirs/nil/" :plugged t)))
;(setq gnus-select-method '(nnml ""))
;(setq gnus-secondary-select-methods nil)
;(setq nnmail-split-methods
;      '(("mail.work" "^To:.*jcb-sc")
;	("mail.other" "")))

(setq user-personal-address "craig@theburleys.net")
(setq user-personal-full-name "Craig Burley")
(setq mail-signature-file-personal "~/.signature-personal")

(setq user-consulting-address "james@jcb-sc.com")
(setq user-consulting-full-name "James Craig Burley")
(setq mail-signature-file-consulting "~/.signature-sc")

(setq user-drh-address "cburley@drh.net")
(setq user-drh-full-name "Craig Burley")
(setq mail-signature-file-drh "~/.signature-drh")

(setq user-kilmnj-address "burley@kilmnj.com")
(setq user-kilmnj-full-name "James Craig Burley")
(setq mail-signature-file-kilmnj "~/.signature-kilmnj")

(setq user-sk8judge-address "sk8judge@theburleys.net")
(setq user-sk8judge-full-name "James Craig Burley")
(setq mail-signature-file-sk8judge "~/.signature-sk8judge")

(setq user-postmaster-address "postmaster@jcb-sc.com")
(setq user-postmaster-full-name "James Craig Burley")
(setq mail-signature-file-postmaster "~/.signature-postmaster")

(setq user-root-address "root@fox.theburleys.net")
(setq user-root-full-name "James Craig Burley")
(setq mail-signature-file-root "~/.signature")

(defun consulting ()
  "Set up Craig as consultant."
  (interactive)
  (setq user-mail-address user-consulting-address
	user-mail-full-name user-consulting-full-name
	mail-signature-file mail-signature-file-consulting)
  (setup-craig))
(defun drh ()
  "Set up Craig as DRH Internet subcontractor."
  (interactive)
  (setq user-mail-address user-drh-address
	user-mail-full-name user-drh-full-name
	mail-signature-file mail-signature-file-drh)
  (setup-craig))
(defun personal ()
  "Set up Craig as consultant."
  (interactive)
  (setq user-mail-address user-personal-address
	user-mail-full-name user-personal-full-name
	mail-signature-file mail-signature-file-personal)
  (setup-craig))
(defun kilmnj ()
  "Set up Craig as kilmnj-site maintainer."
  (interactive)
  (setq user-mail-address user-kilmnj-address
	user-mail-full-name user-kilmnj-full-name
	mail-signature-file mail-signature-file-kilmnj)
  (setup-craig))
(defun sk8judge ()
  "Set up Craig as figure skating judge."
  (interactive)
  (setq user-mail-address user-sk8judge-address
	user-mail-full-name user-sk8judge-full-name
	mail-signature-file mail-signature-file-sk8judge)
  (setup-craig))
(defun postmaster ()
  "Set up Craig as postmaster."
  (interactive)
  (setq user-mail-address user-postmaster-address
	user-mail-full-name user-postmaster-full-name
	mail-signature-file mail-signature-file-postmaster)
  (setup-craig))
(defun root ()
  "Set up Craig as root on fox."
  (interactive)
  (setq user-mail-address user-root-address
	user-mail-full-name user-root-full-name
	mail-signature-file mail-signature-file-root)
  (setup-craig))

(defun setup-craig ()
  "Craig's email identity has been set up; implement it."
  (interactive)
  (setq-default add-log-full-name user-mail-full-name
		add-log-mailing-address user-mail-address)
  (setq frame-title-format
	(concat "%b - " (getenv "HOSTNAME") ":" user-mail-address))
  (message "user-mail-address set to %s (%s), signature file to %s" user-mail-address user-mail-full-name mail-signature-file))

(if (= (user-real-uid) 0)
    (root)
  (personal))

;;;; File-handling control
(setq auto-save-list-file-prefix "~/.saves/") ;put 'em in a directory.
(make-directory "~/.saves" t)
(setq auto-save-interval 10000) ;auto-save rarely (timer does it anyway).
(setq delete-auto-save-files t)	;gc when the file itself is saved.
(setq make-backup-files t)
(setq backup-by-copying-when-mismatch t)
(setq version-control t)
(setq kept-new-versions 30000)
(setq kept-old-versions 30000)

;Stuff for add-log.el
;(setq add-log-full-name "James Craig Burley")
;(setq add-log-mailing-address "james@jcb-sc.com")
;(add-hook 'change-log-mode-hook
;  (function (lambda ()
;    (kill-local-variable 'version-control))))

(setq search-yank-word-char nil)	; stupid misfeature
(setq search-yank-line-char nil)

(setq inhibit-startup-message t)

(setq enable-recursive-minibuffers t)

(setq indent-tabs-mode nil)

;(put 'eval-expression 'disabled nil)
(put 'narrow-to-page 'disabled nil)
(put 'narrow-to-region 'disabled nil)

;;; (who?) I am perpetually doing C-x f instead of C-x C-f and screwing myself!
;;; Worse yet, undo won't undo that!
(defun maybe-set-fill-column (arg)
  "Set fill-column to argument.  C-u means current position; no argument, beep.
fill-column's value is separate for each buffer."
  (interactive "P")
  (if (null arg)
      (message "fill column is %d (unchanged)." fill-column)
    (message "fill-column set to %d" (setq fill-column (if (integerp arg)
							   arg
							 (current-column))))))
(global-set-key "\C-xf" 'maybe-set-fill-column)


(global-set-key "\C-cw" 'compare-windows)

(put 'erase-buffer 'disabled nil)

(put 'upcase-region 'disabled nil)

(put 'downcase-region 'disabled nil)
(custom-set-variables
  ;; custom-set-variables was added by Custom -- don't edit or cut/paste it!
  ;; Your init file should contain only one such instance.
 '(gnus-subscribe-newsgroup-method (quote gnus-subscribe-hierarchically)))
(custom-set-faces
  ;; custom-set-faces was added by Custom -- don't edit or cut/paste it!
  ;; Your init file should contain only one such instance.
 '(default ((t (:stipple nil :background "#ffffff" :foreground "#000000" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 100 :width normal :family "adobe-courier")))))

